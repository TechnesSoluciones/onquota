# =============================================================================
# OnQuota - Production Environment Configuration
# =============================================================================
# Copy this file to .env.production and fill in your actual values
# IMPORTANT: Never commit .env.production to version control
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
PROJECT_NAME=OnQuota
VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# EXTERNAL DATABASE (Hetzner or other provider)
# -----------------------------------------------------------------------------
# Format: postgresql+asyncpg://user:password@host:port/database
# Example: postgresql+asyncpg://onquota_user:your_password@db.example.com:5432/onquota_production
DATABASE_URL=postgresql+asyncpg://YOUR_DB_USER:YOUR_DB_PASSWORD@YOUR_DB_HOST:5432/YOUR_DB_NAME
DB_ECHO=false
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# REDIS (Local in Docker or External)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=YOUR_STRONG_REDIS_PASSWORD_HERE
REDIS_URL=redis://:YOUR_STRONG_REDIS_PASSWORD_HERE@redis:6379/0
REDIS_CACHE_DB=1

# -----------------------------------------------------------------------------
# CELERY (Background Tasks)
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://:YOUR_STRONG_REDIS_PASSWORD_HERE@redis:6379/0
CELERY_RESULT_BACKEND=redis://:YOUR_STRONG_REDIS_PASSWORD_HERE@redis:6379/0
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=300

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1
API_DOCS_URL=  # Disable docs in production for security
API_REDOC_URL=  # Disable redoc in production for security

# -----------------------------------------------------------------------------
# CORS (Adjust for your domain)
# -----------------------------------------------------------------------------
# Replace with your actual domain(s)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=*
CORS_HEADERS=*

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=YOUR_SUPER_SECRET_KEY_HERE_GENERATE_NEW_ONE
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# 2FA Encryption Key
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOTP_ENCRYPTION_KEY=YOUR_FERNET_KEY_HERE

# -----------------------------------------------------------------------------
# FRONTEND CONFIGURATION
# -----------------------------------------------------------------------------
# Replace with your actual domain or IP
NEXT_PUBLIC_API_URL=https://yourdomain.com/api/v1
NEXT_PUBLIC_APP_NAME=OnQuota

# -----------------------------------------------------------------------------
# STORAGE (Optional - for file uploads)
# -----------------------------------------------------------------------------
STORAGE_TYPE=local  # or s3, minio
# If using S3:
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1
# S3_BUCKET_NAME=

# -----------------------------------------------------------------------------
# EMAIL (Optional - for notifications)
# -----------------------------------------------------------------------------
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=
FROM_EMAIL=noreply@yourdomain.com
FROM_NAME=OnQuota

# -----------------------------------------------------------------------------
# MONITORING (Optional)
# -----------------------------------------------------------------------------
# Flower (Celery UI) Authentication
FLOWER_USER=admin
FLOWER_PASSWORD=YOUR_FLOWER_PASSWORD_HERE

# Grafana Authentication
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=YOUR_GRAFANA_PASSWORD_HERE
GRAFANA_ROOT_URL=https://yourdomain.com/grafana

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES (Optional)
# -----------------------------------------------------------------------------
# OCR
TESSERACT_PATH=/usr/bin/tesseract
TESSERACT_LANG=spa+eng
GOOGLE_VISION_API_KEY=
OCR_CONFIDENCE_THRESHOLD=0.85
MAX_IMAGE_SIZE_MB=10

# Geolocation
GOOGLE_MAPS_API_KEY=

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# -----------------------------------------------------------------------------
# PAGINATION
# -----------------------------------------------------------------------------
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100
